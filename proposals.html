<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="description" content="Constellation CRM: Proposals.">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategic - CRM - Proposals</title>
    <link rel="stylesheet" href="output.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.2/Sortable.min.js"></script>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://unpkg.com/@zumer/snapdom/dist/snapdom.js"></script>
    <style>
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .gpc-pdf-font { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important; -webkit-font-smoothing: antialiased; }
        #freeflow-render-zone, #pricing-render-zone, #references-render-zone { background-color: #FFFFFF !important; }
    </style>
</head>
<body>
    <script>
    (function() { const savedTheme = localStorage.getItem('crm-theme') || 'dark'; document.body.className = 'theme-' + savedTheme; })();
    </script>
    <div class="crm-container">
        <nav class="nav-sidebar">
            <script>(function(){try{if(localStorage.getItem('crm-nav-collapsed')==='1')document.currentScript.parentElement.classList.add('nav-sidebar-collapsed');}catch(e){}})();</script>
            <div id="global-nav-container" class="flex flex-col flex-1 min-h-0"></div>
        </nav>
        <main class="content-area">
            <div id="proposals-view" class="content-view active-view proposals-layout">
                <div class="proposals-picker-panel">
                    <div class="proposals-picker-header">
                        <h2 class="section-title">Proposals</h2>
                    </div>
                    <div class="proposals-picker-body">
                <button id="generate-btn" data-state="initial" class="btn-primary full-width proposals-generate-btn disabled:opacity-70 disabled:cursor-not-allowed"><svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16l4-4 4 4m0-8H8"></path></svg><span>Compile Proposal</span></button>
<div class="proposals-file-actions flex gap-2 mb-6 pb-6">
                    <button type="button" id="save-project-btn" class="flex-1 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-3 rounded-lg shadow-sm transition text-sm flex justify-center items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path></svg>
                        Save (.spec)
                    </button>
                    <label class="flex-1 bg-slate-100 hover:bg-slate-200 text-slate-700 font-bold py-2 px-3 rounded-lg border border-slate-300 shadow-sm transition cursor-pointer flex justify-center items-center gap-2 text-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>
                        Load Project
                        <input type="file" id="load-project-input" accept=".spec" class="hidden">
                    </label>
                </div>
                <h2 class="text-lg font-bold mb-4 border-b border-slate-100 pb-2 text-slate-800">1. Proposal Properties</h2>
                <div class="space-y-4 mb-8">
                    <div><label class="block text-sm font-semibold text-slate-700">RFP Name / Proposal Name</label><input type="text" id="global-rfp" maxlength="33" class="w-full border border-slate-300 p-2 rounded mt-1 bg-slate-50 focus:bg-white outline-none focus:border-orange-500"></div>
                    <div><label class="block text-sm font-semibold text-slate-700">Business Name</label><input type="text" id="global-biz" maxlength="33" class="w-full border border-slate-300 p-2 rounded mt-1 bg-slate-50 focus:bg-white outline-none focus:border-orange-500"></div>
                    <div><label class="block text-sm font-semibold text-slate-700">Sales Rep</label><input type="text" id="global-rep" class="w-full border border-slate-300 p-2 rounded mt-1 bg-slate-50 focus:bg-white outline-none focus:border-orange-500"></div>
                    <div class="flex gap-4 mt-4 border-t border-slate-100 pt-4"><div class="flex-1"><label class="block text-sm font-semibold text-slate-700">Project Start Date</label><input type="text" id="global-start" placeholder="e.g. Q3 2026" class="w-full border border-slate-300 p-2 rounded mt-1 bg-slate-50 focus:bg-white outline-none focus:border-orange-500"></div>
                    <div class="flex-1"><label class="block text-sm font-semibold text-slate-700">Completion</label><input type="text" id="global-end" placeholder="e.g. Q4 2026" class="w-full border border-slate-300 p-2 rounded mt-1 bg-slate-50 focus:bg-white outline-none focus:border-orange-500"></div>
</div>
               </div>

                <h2 class="text-lg font-bold mb-1 border-b border-slate-100 pb-2 text-slate-800">2. Proposal Elements</h2>
                <p class="proposal-elements-help mb-4">Drag to reorder</p>
<ul id="module-list" class="space-y-2 flex-1 overflow-y-auto pb-4">
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="01_Title_Page.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" checked class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Title Page</span>
        <button onclick="previewStockPdf('01_Title_Page.pdf', 'Title Page')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group border-l-4 border-l-orange-400" data-filename="CUSTOM_COVER">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" checked id="toggle-cover-letter" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Cover Letter</span>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group border-l-4 border-l-orange-400" data-filename="CUSTOM_TEXT">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" id="toggle-custom-text" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Custom Page</span>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group border-l-4 border-l-orange-400" data-filename="CUSTOM_IMPACT">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" id="toggle-impact-roi" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Impact & ROI</span>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="02_Why_GPC.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" checked class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Why GPC?</span>
        <button onclick="previewStockPdf('02_Why_GPC.pdf', 'Why GPC?')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="03_About_GPC.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" checked class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">About GPC</span>
        <button onclick="previewStockPdf('03_About_GPC.pdf', 'About GPC')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group border-l-4 border-l-orange-400" data-filename="CUSTOM_REFERENCES">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" checked id="toggle-references" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">References</span>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group border-l-4 border-l-orange-400" data-filename="CUSTOM_PRICING">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" checked id="toggle-pricing" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Proposed Pricing</span>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="04_NOC_Monitoring.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">24-Hour NOC Monitoring</span>
        <button onclick="previewStockPdf('04_NOC_Monitoring.pdf', '24-Hour NOC Monitoring')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="05_DIA.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Dedicated Internet Access (DIA)</span>
        <button onclick="previewStockPdf('05_DIA.pdf', 'Dedicated Internet Access (DIA)')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="06_SIA.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Standard Internet Access (SIA)</span>
        <button onclick="previewStockPdf('06_SIA.pdf', 'Standard Internet Access (SIA)')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="07_CaseStudy.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Boys Town Case Study</span>
        <button onclick="previewStockPdf('07_CaseStudy.pdf', 'Boys Town Case Study')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="08_SPIN.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">SPIN ID Number</span>
        <button onclick="previewStockPdf('08_SPIN.pdf', 'SPIN ID Number')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="09_Project.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Project Implementation Plan</span>
        <button onclick="previewStockPdf('09_Project.pdf', 'Project Implementation Plan')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="10_Leadership.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Senior Leadership</span>
        <button onclick="previewStockPdf('10_Leadership.pdf', 'Senior Leadership')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group" data-filename="11_Escalation.pdf">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Escalation Process</span>
        <button onclick="previewStockPdf('11_Escalation.pdf', 'Escalation Process')" class="text-slate-400 hover:text-orange-500 transition px-2" title="Preview PDF">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
        </button>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group border-l-4 border-l-slate-400" data-filename="CUSTOM_PDF">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" id="toggle-custom-pdf" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">Upload Custom PDF</span>
    </li>
    
    <li class="flex items-center bg-slate-50 p-3 rounded-lg border border-slate-200 shadow-sm cursor-grab group border-l-4 border-l-slate-400" data-filename="USAC_RFP">
        <svg class="w-5 h-5 handle text-slate-400 group-hover:text-orange-500 transition cursor-grab mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h.01M8 12h.01M8 18h.01M16 6h.01M16 12h.01M16 18h.01"></path></svg>
        <input type="checkbox" id="toggle-usac" class="mr-3 w-4 h-4 text-orange-500 slide-toggle">
        <span class="flex-1 font-medium text-sm text-slate-700">USAC Original RFP</span>
    </li>
    
</ul>
            </div>
                    </div>
                <div id="main-content" class="flex-1 overflow-hidden flex flex-col proposals-details-content details-panel min-w-0 min-h-0">
            <div class="flex-1 bg-slate-100 p-5 overflow-y-auto" id="scroll-container">
                <div class="w-full max-w-[1680px] mx-auto space-y-8">
                    <div id="cover-letter-section" class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8 transition-all duration-300">
                        <div class="flex items-center mb-4 border-b border-slate-100 pb-2 gap-2">
                            <svg class="w-6 h-6 text-slate-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            <h3 class="text-2xl font-bold text-slate-800">Cover Letter</h3>
                        </div>
                        <input type="text" id="cover-title-input" class="w-full border border-slate-300 p-2 rounded-lg mb-3 bg-slate-50 outline-none focus:border-orange-500 font-semibold text-slate-700" placeholder="Document Title (Leave blank for cover pages)">
                        <div class="flex gap-6 flex-nowrap items-start">
                            <div class="w-[680px] flex-shrink-0">
                                <textarea id="cover-body" class="w-full h-[624px] p-3 border border-slate-300 rounded-lg bg-white resize-y font-sans text-base focus:outline-none focus:border-orange-500" placeholder="Dear [Client Name]..." style="white-space: pre-wrap;"></textarea>
                            </div>
                            <div class="flex-1 min-w-0 flex gap-4 h-[624px] overflow-hidden">
                                <div class="w-[260px] h-[624px] flex-shrink-0 flex flex-col gap-4 overflow-hidden">
                                    <div class="rounded-xl bg-slate-50 border border-slate-200 p-4 text-slate-600 flex-shrink-0">
                                        <h3 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Click to add</h3>
                                        <p class="text-xs text-slate-400 mb-2">Inserts at cursor in the cover letter.</p>
                                        <div id="cover-snippets" class="space-y-2 overflow-auto min-h-0"></div>
                                    </div>
                                    <div class="bg-white shadow-sm border border-slate-200 rounded-xl flex-1 min-h-0 flex flex-col overflow-hidden min-w-0">
                                        <h3 class="text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-slate-100 px-4 py-3 flex-shrink-0">Proposal Readiness</h3>
                                        <div id="proposal-readiness-checklist" class="p-4 space-y-3 border-0 border-t border-slate-200 flex-1 min-h-0 overflow-auto min-w-0">
                                            <button type="button" id="check-rfp-biz" class="proposal-readiness-pill" aria-pressed="false"><span class="proposal-readiness-text">RFP &amp; Business name filled</span></button>
                                            <button type="button" id="check-cover" class="proposal-readiness-pill" aria-pressed="false"><span class="proposal-readiness-text">Cover letter personalized</span></button>
                                            <button type="button" id="check-pricing" class="proposal-readiness-pill" aria-pressed="false"><span class="proposal-readiness-text">Pricing reviewed</span></button>
                                            <button type="button" id="check-ready" class="proposal-readiness-pill" aria-pressed="false"><span class="proposal-readiness-text">Ready to generate</span></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1 min-w-[200px] h-[624px] min-h-0 flex flex-col overflow-hidden">
                                    <div class="bg-white shadow-sm border border-slate-200 rounded-xl h-full flex flex-col overflow-hidden">
                                        <h3 class="text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-slate-100 px-4 py-3 flex-shrink-0">Proposal Notes</h3>
                                        <textarea id="discovery-scratchpad" class="w-full border-0 border-t border-slate-200 p-4 text-sm text-slate-800 bg-slate-50 focus:bg-white outline-none flex-1 min-h-0 resize-none" placeholder="Sites, circuit counts, bandwidth needs, contact names, quick math, raw notes…"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="custom-text-section" class="hidden bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8 transition-all duration-300">
                        <div class="flex items-center mb-4 border-b border-slate-100 pb-2 gap-2">
                            <svg class="w-6 h-6 text-slate-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                            <h3 class="text-2xl font-bold text-slate-800">Custom Page</h3>
                        </div>
                        <input type="text" id="custom-text-title-input" class="w-full border border-slate-300 p-2 rounded-lg mb-3 bg-slate-50 outline-none focus:border-orange-500 font-semibold text-slate-700" placeholder="Document Title (Leave blank for no header)">
                        <div class="flex gap-6 flex-nowrap items-start">
                            <div class="flex-1 min-w-[500px]">
                                <textarea id="custom-text-body" class="w-full h-64 p-3 border border-slate-300 rounded-lg bg-white resize-y font-sans text-base focus:outline-none focus:border-orange-500" placeholder="Start typing custom content..." style="white-space: pre-wrap;"></textarea>
                                <p id="warning-customText" class="hidden text-red-600 text-sm font-bold mt-2">⚠️ Warning: Text exceeds PDF page height and may be cut off. Please shorten.</p>
                            </div>
                            <div class="w-[280px] flex-shrink-0 rounded-xl bg-slate-50 border border-slate-200 p-4 text-slate-600 flex flex-col gap-4">
                                <div>
                                    <h3 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Click to add</h3>
                                    <p class="text-xs text-slate-400 mb-2">Inserts at cursor in the custom page.</p>
                                    <div id="custom-page-snippets" class="space-y-2 overflow-auto min-h-0"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="custom-pdf-section" class="hidden bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8 transition-all duration-300">
                        <div class="flex items-center mb-4 border-b border-slate-100 pb-2 gap-2">
                            <svg class="w-6 h-6 text-slate-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path></svg>
                            <h3 class="text-2xl font-bold text-slate-800">Upload Custom PDF (Exec Summary, etc.)</h3>
                        </div>
                        <input type="file" id="custom-pdf-upload" class="hidden" accept="application/pdf">
                        <div class="border-2 border-dashed border-slate-300 rounded-xl p-8 text-center bg-slate-50 hover:bg-orange-50 hover:border-orange-400 transition cursor-pointer group" onclick="document.getElementById('custom-pdf-upload').click()">
                            <svg class="mx-auto h-12 w-12 text-slate-400 group-hover:text-orange-500 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>
                            <span id="custom-pdf-filename" class="mt-2 block text-slate-600 font-medium group-hover:text-orange-600">Drag and drop Custom PDF here, or click to browse</span>
                        </div>
                    </div>

                    <div id="references-section" class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8 transition-all duration-300">
                        <div class="flex items-center mb-6 border-b border-slate-100 pb-2 gap-2">
                            <svg class="w-6 h-6 text-slate-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                            <h3 class="text-2xl font-bold text-slate-800">References</h3>
                        </div>
                        <div class="grid grid-cols-2 gap-6" id="references-container">
                            </div>
                    </div>

                    <div id="pricing-section" class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8 transition-all duration-300 flex flex-col">
                        <div class="flex justify-between items-center mb-6 border-b border-slate-100 pb-2">
                            <h3 class="text-2xl font-bold text-slate-800 flex items-center gap-2">
                                <svg class="w-6 h-6 text-slate-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                Dynamic Pricing Engine
                            </h3>
                            <button id="add-location-btn" class="bg-slate-800 text-white text-sm font-semibold px-4 py-2 rounded-lg shadow-sm hover:bg-slate-900 transition">+ Add Location</button>
                        </div>
                        <div class="mb-6 w-1/3 min-w-[200px]">
                            <label class="block text-sm font-semibold text-slate-700">Contract Term (Months)</label>
                            <input type="text" id="contract-term" class="w-full border border-slate-300 p-2 rounded-lg mt-1 bg-slate-50 focus:bg-white outline-none focus:border-orange-500 transition" placeholder="e.g. 36">
                        </div>
                        <div id="locations-container" class="space-y-8"></div>
                        <div class="mt-6 border-t border-slate-200 pt-6 flex justify-between items-center bg-slate-50 p-6 rounded-lg">
                            <span class="text-xl font-bold text-slate-800 uppercase">Total Monthly Cost:</span>
                            <span id="grand-total" class="text-3xl font-extrabold text-orange-600">$0.00</span>
                        </div>
                    </div>

                    <div id="impact-roi-section" class="hidden bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8 transition-all duration-300">
                        <div class="flex items-center mb-6 border-b border-slate-100 pb-2 gap-2">
                            <svg class="w-6 h-6 text-slate-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                            <h3 class="text-2xl font-bold text-slate-800">Impact & ROI</h3>
                        </div>
                        <div class="grid grid-cols-2 gap-6 mb-6">
                            <div class="rounded-xl border border-slate-200 p-5 bg-slate-50 shadow-sm">
                                <h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-slate-100 pb-2 mb-3">Current State</h4>
                                <textarea id="impact-current" class="w-full border border-slate-300 p-2 rounded-lg text-sm text-slate-800 bg-white min-h-[100px] resize-y outline-none focus:border-orange-500 transition" placeholder="Current infrastructure, pain points…"></textarea>
                            </div>
                            <div class="rounded-xl border border-slate-200 border-l-4 border-l-orange-500 p-5 bg-slate-50 shadow-sm">
                                <h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-slate-100 pb-2 mb-3">Proposed Solution</h4>
                                <textarea id="impact-proposed" class="w-full border border-slate-300 p-2 rounded-lg text-sm text-slate-800 bg-white min-h-[100px] resize-y outline-none focus:border-orange-500 transition" placeholder="Proposed solution, benefits…"></textarea>
                            </div>
                        </div>
                        <div class="grid grid-cols-3 gap-4 border-t border-slate-100 pt-4">
                            <div><label class="block text-xs font-bold text-slate-500 uppercase mb-1">Current monthly ($)</label><input type="number" id="impact-current-cost" placeholder="0" class="w-full border border-slate-300 p-2 rounded-lg text-slate-800 bg-white"></div>
                            <div><label class="block text-xs font-bold text-slate-500 uppercase mb-1">Proposed monthly ($)</label><input type="number" id="impact-proposed-cost" placeholder="0" class="w-full border border-slate-300 p-2 rounded-lg text-slate-800 bg-white"></div>
                            <div><label class="block text-xs font-bold text-slate-500 uppercase mb-1">Net impact</label><div id="impact-net" class="w-full border border-slate-200 p-2 rounded-lg text-slate-800 bg-slate-50 font-semibold">$0</div></div>
                        </div>
                    </div>

                    <div id="usac-upload-section" class="hidden bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8 transition-all duration-300">
                        <div class="flex items-center mb-4 border-b border-slate-100 pb-2">
                            <h3 class="text-2xl font-bold text-slate-800">USAC Original RFP Upload</h3>
                        </div>
                        <input type="file" id="usac-upload" class="hidden" accept="application/pdf">
                        <div class="border-2 border-dashed border-slate-300 rounded-xl p-8 text-center bg-slate-50 hover:bg-orange-50 hover:border-orange-400 transition cursor-pointer group" onclick="document.getElementById('usac-upload').click()">
                            <svg class="mx-auto h-12 w-12 text-slate-400 group-hover:text-orange-500 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>
                            <span id="usac-filename" class="mt-2 block text-slate-600 font-medium group-hover:text-orange-600">Drag and drop USAC RFP PDF here, or click to browse</span>
                        </div>
                    </div>

                    <div class="pb-10 mt-8"></div>
                </div>
            </div>
        </div>
    </div>

<div id="pdf-preview-modal" class="hidden absolute inset-0 bg-slate-900 bg-opacity-90 flex flex-col items-center justify-center z-[80] p-6">
        <div class="flex flex-col h-[85vh] w-[calc(85vh*0.82)] max-w-full">
            <div class="flex justify-between items-center mb-4 w-full">
                <h2 class="text-white text-2xl font-bold" id="pdf-preview-title">PDF Preview</h2>
                <div class="flex items-center gap-4">
                    <button id="modal-download-btn" class="hidden bg-white text-orange-600 hover:bg-orange-50 font-bold py-2 px-6 rounded shadow-lg transition">⬇ Download Proposal</button>
                    <button onclick="closePdfModal()" class="text-white hover:text-red-500 font-bold text-3xl transition leading-none">✕</button>
                </div>
            </div>
            <div class="bg-[#525659] rounded-lg shadow-2xl flex-1 overflow-hidden border-4 border-slate-700 w-full">
                <iframe id="pdf-preview-iframe" class="w-full h-full border-0" src=""></iframe>
            </div>
        </div>
    </div>

    <div id="loading-overlay" class="hidden fixed inset-0 z-[100] flex flex-col items-center justify-center bg-slate-900/40 backdrop-blur-md">
        <div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl px-12 py-10 flex flex-col items-center">
            <img src="Proposal_Assets/GPC-White-1-1.webp" alt="" class="h-16 mb-4 object-contain">
            <div class="animate-spin rounded-full h-20 w-20 border-b-4 mb-6 border-orange-500"></div>
            <p class="text-xl font-bold tracking-widest animate-pulse text-white">Assembling Proposal...</p>
        </div>
    </div>

    <div id="toast-container" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-[150] flex flex-col gap-2 pointer-events-none" aria-live="polite"></div>

    <div id="render-zones" class="absolute top-[-9999px] left-[-9999px] w-[800px] bg-white p-12 gpc-pdf-font">
        
        <div id="freeflow-render-zone" class="w-full bg-white text-black p-8">
            <div id="render-freeflow-body" style="overflow: visible !important; height: auto !important; max-height: none !important; padding: 0; font-size: 16px; line-height: 1.5;"></div>
        </div>

     <div id="hidden-pricing-template" class="w-full bg-white text-black gpc-pdf-font" style="width: 750px;"></div>
     <div id="pricing-render-zone" class="w-full bg-white text-black p-4 gpc-pdf-font" style="width: 800px;">
    <div id="flex-table-container" style="border: 2px solid #DE5A24; width: 750px;">
        <div style="display: flex; background-color: #DE5A24; color: white; font-weight: bold; text-transform: uppercase;">
            <div style="width: 380px; padding: 12px 16px; border-right: 1px solid #DE5A24;">PRODUCT</div>
            <div style="width: 140px; padding: 12px 5px; text-align: center; border-right: 1px solid #DE5A24;">LIST PRICE</div>
            <div style="width: 90px; padding: 12px 5px; text-align: center; border-right: 1px solid #DE5A24;">QTY</div>
            <div style="width: 140px; padding: 12px 16px; text-align: center;">TOTAL</div>
        </div>

        <div id="flex-table-body"></div>

        <div style="display: flex; background-color: #12243D; color: white; font-weight: bold; font-size: 1.1rem;">
            <div style="width: 610px; padding: 16px;">TOTAL MONTHLY COST</div>
            <div id="render-grand-total-flex" style="width: 140px; padding: 16px; text-align: center;">$0.00</div>
        </div>
    </div>
    <p class="text-center text-sm text-black mt-8" id="render-term-text-flex">Pricing based off XX-month term</p>
</div>

        <div id="references-render-zone" class="w-full bg-white text-black p-8">
            <div id="render-references-body" class="space-y-0">
                </div>
        </div>
    </div>

    <!-- Hybrid chassis: off-screen wrappers for Snapdom (swap .png to .svg in production) -->
    <div id="gpc-title-render-wrapper" class="absolute -top-[9999px] -left-[9999px] w-[8.5in] h-[11in]"></div>
    <div id="gpc-interior-render-wrapper" class="absolute -top-[9999px] -left-[9999px]"></div>
    <script type="module" src="js/proposals.js"></script>
    <script src="js/enterprise-proposals-embed.js"></script>
</body>
</html>
